{% extends "base.html" %}

{% block content %}
    <script>
        function test_function(){
            var current_selected_user = document.getElementById("choices").value;
            // Users.giveMessagesFrom()
            // console.log("Here is messages: " + messages)
            /*fetch(`/test/${current_selected_user}`).then(function (response) {
                console.log("Response: ", response.json().message)
            });*/
            window.location.replace(`http://127.0.0.1:5000/message_room/${current_selected_user}`)
        }
    </script>
    <h4> Hi {{current_user.name}}, here are your messages: </h4>
    <form action="" method="POST", novalidate>
        {{ form.hidden_tag() }}

        <div>
            {{ form.message.label }}
            {{ form.message(size=100) }}
            <!-- <form action="" method="POST", novalidate>
                {{ form.choices.csrf_token }}   
                {{ form.choices.options }} 
            </form> -->
            {{ form.choices }}
            {{ form.send() }}
        </div>
    </form>
    {% for message in messages %}
        <p> <b> {{ message.give_name(current_user.id) }}: </b> {{ message.content }} </p>
    {% endfor %}
   
{% endblock %}